# Exercise 1:

![[01_01.png]]

 - Which arcs in the above constraint network are arc consistent?

The arc $\langle A, A < B \rangle$ is arc-consistent, since the condition holds for all values in A and all values in B.

 - How can the whole network be made arc consistent, i.e., which changes should be made to the domains of the variables making the network arc-consistent without eliminating potential solutions?

We should remove the $4$ from the domain of $B$ to make that arc to $C$ is consistent. Since we updated $B$ we need to make sure the arc to $A$ is still consistent, which is done by removing the $3$ from the domain of $A$. This results in:

$$
\begin{align*}
    & dom(A) &= \{1, 2\} \\
    & dom(B) &= \{2, 3\} \\
    & dom(C) &= \{3, 4\} \\
\end{align*}
$$

# Exercise 2:

Consider the following mini-Sudoku:

![[01_02.png]]

The empty fields have to be filled with numbers 1, 2, 3, or 4, such that each row, each column, and each of the 2 $\times$ 2 sub-squares contain each of these numbers exactly once.

1. Formalize this problem as a constraint satisfaction problem: define an appropriate set of variables, and a set of constraints that define the solutions of the sudoku (hint: instead of using constraints as on the lecture slide, define a smaller set of constraints, each constraint expressing the full condition for one row, one column, or one sub-square. We have not discussed off-the-shelf formal languages for expressing such constraints, so you should try to express them as formally as possible)

We have in total 4 rows, 4 columns and 4 blocks. In total we have 16 fields. Each of these fields can take on one of four values, constraints aside. We express each of the variable domains as $D_{ij}$ where $i$ is the row index, and $j$ is the column index:

$$
\{ \{ 1, 2, 3, 4 \} \in D_{ij} | \forall i,j \in \{1, 2, 3, 4\} \}
$$

Next, we define each of the constraints. We label the constraints for rows and columns according the their index, the first row constraint would be $R_1$, likewise for the column $C_1$. We must not repeat numbers, and as such we express the column and row constraints as:

$$
\begin{align*}
    &C_j &= \{ V_{ij} \neq V_{i'j} | \forall i,i' \in \{1, 2, 3, 4\} \text{ where } i \neq i' \} \\
    &R_i &= \{ V_{ij} \neq V_{ij'} | \forall j,j' \in \{1, 2, 3, 4\} \text{ where } j \neq j' \} \\
\end{align*}
$$

Alternatively expressed, any value must not be repeated in a row, likewise for columns. We use a similar syntax for expressing each of the constraints for each of the blocks:

$$
\begin{align*}
    & B_1 &= \{ V_{ij} \neq V_{i'j'} | \forall i,i',j,j' \in \{1, 2\} \text{ where } i \neq i' \wedge j \neq j' \} \\
    & B_2 &= \{ V_{ij} \neq V_{i'j'} | \forall i,i' \in \{1, 2\} \forall j,j' \in \{3, 4\} \text{ where } i \neq i' \wedge j \neq j' \} \\
    & B_3 &= \{ V_{ij} \neq V_{i'j'} | \forall i,i' \in \{3, 4\} \forall j,j' \in \{1, 2\} \text{ where } i \neq i' \wedge j \neq j' \} \\
    & B_4 &= \{ V_{ij} \neq V_{i'j'} | \forall i,i',j,j' \in \{3, 4\} \text{ where } i \neq i' \wedge j \neq j' \} \\
\end{align*}
$$

Alternatively, any value within a block must not be repeated.

2. Draw the constraint network for this problem. If this gets too large, draw only the part of the network that is sufficient to answer the next question.

Nopedinope.

3. Apply the generalized arc consistency algorithm to show that the top left square must contain a 1. Does the operation of the algorithm resemble how you would come to that conclusion yourself?

We have several arcs constraining the top left value:

$$
\begin{align*}
    & \langle D_{11}, D_{11} \neq D_{21}\rangle & \text{effect: } D_{11}\backslash \{2\} \\
    & \langle D_{11}, D_{11} \neq D_{41}\rangle & \text{effect: } D_{11}\backslash \{3\} \\
    & \langle D_{11}, D_{11} \neq D_{13}\rangle & \text{effect: } D_{11}\backslash \{4\} \\
\end{align*}
$$

Each of these removes one possible value from the domain, $D_{11}$, leaving us with a single value left, $1$.

# Exercise 3:

Consider the following constraint network $\gamma = (V,D,C)$:

 - Variables: $V = \{a,b,c,d\}$
 - Domains: $\forall v \in V$: $D_v = \{1,2,3,4,5,6,7,8,9,10\}$
 - Constaints: $2|a-c| > 3$; $b^2-3d < 9$; $b + 3 < c$

Run the Generalized Arc Consistency(γ) algorithm, as specified in the lecture. Precisely, for each iteration of the while-loop, give the content of To-do-arcs at the start of the iteration, give the pair (x, c) removed from To-do-arcs, give the domain Dx of x after the call to Revise(γ, x, c), and give the pairs (y, c0) added into M

Todo: 
$$
\begin{align*}
    & \{ & \\
    & \langle D_a, & 2|a - c| > 3 \rangle, \\
    & \langle D_b, & b^2 - 3d < 9 \rangle, \\
    & \langle D_b, & b + 3 < c \rangle, \\
    & \langle D_c, & 2|a - c| > 3 \rangle, \\
    & \langle D_c, & b + 3 < c \rangle, \\
    & \langle D_d, & b^2 - 3d < 9 \rangle, \\
  \}& \\
\end{align*}
$$

Jesus, no more.

# Exercise 4

Consider the constraint graph of Figure 4.17 with named binary constraints. $r_1$ is a relation on $A$ and $B$, which we write as $r_1(A, B)$, and similarly for the other relations. Consider solving this network using variable elimination.

![[figure_02_04.png]]

- Suppose you were to eliminate variable $A$. Which constraints are removed? A constraint is created on which variables? (You can call this $r_{11}$.)

We eleminate the variable $A$ and now we have two 'dangling' relations, namely $r_2(A, C)$ and $r_1(A, B)$. We combine the two, and make a new relation $r_{11}(B, C)$.

- Suppose you were to subsequently eliminate $B$ (i.e., after eliminating $A$). Which relations are removed? A constraint is created on which variables?

When we eleminate $B$ we have three 'dangling' relations, namely $r_3(B, D)$, $r_4(B, E)$ and $r_{11}(B, C)$. We therefore combine these into a single new relation, $r_{12}(C, D, E)$.

# Exercise 5

Use Variable Elimination to solve the following CSP given by extensional constraints on Boolean variables A, B, C:

We first eliminate $A$. There's no special reason for this. First we write all the tables.


$r_1$
| $A$ | $B$ |
| - | - |
| t | f |
| t | t |
| f | t |

$r_2$
| $A$ | $C$ |
| - | - |
| t | f |
| f | t |

$r_3$
| $B$ | $C$ |
| - | - |
| t | f |
| f | t |

As stated we eliminate $A$ for no apparent reason, in SQL-like language we perform a join of A,B and A,C. In more programatic terms for each entry in A, B we append C from A, C as long as A = A from the different tables. We join A, B and A, C on A.

$r_4: r_1 \bowtie r_2$
| $A$ | $B$ | $C$ |
| - | - | - |
| t | f | f |
| t | t | f |
| f | t | t |

After eliminating duplicates after removing the column $A$ from $r_4$:
$r_5: \pi\{B, C\}r_4$
| $B$ | $C$ |
| - | - |
| f | f |
| t | f |
| t | t |

Now we join the relations $r_5$ and $r_3$ (graphically we converting two relations two and from the same domains to a single combined relation):

$r_6: r_3 \bowtie r_5$
| $B$ | $C$ |
| - | - |
| t | f |

The result of $r_6$ is single relation from $B$ to $C$, now we need to include possible values of $A$ and as such we join with table $r_4$:

$r_7: r_4 \bowtie r_6$
| $A$ | $B$ | $C$ |
| - | - | - |
| t | t | f |

and that is the conclusion. For this network, only a single solution exists.

# Exercise 6:

Consider the cryptarithmetic puzzle

$$
\begin{align*}
    & &T &W &O \\
    &+ & & & \\
    &F &O &U &R \\
\end{align*}
$$

$$
\begin{align*}
    O + O &= R + 10 * C_1 & \\
    W + W &= U + 10 * C_2 & \\
    T + T &= O + 10 * C_3 & \\
    F &= C_3 & \\
\end{align*}
$$









